var StampedFn=StampedFn||function(A,q){var s,D,r=Math.round((new Date).getTime()/1e3),y=(A.stamped_ajax_url,A.stamped_ajax_secure_url||"https://stamped.io/api"),o=(q.getElementsByTagName("script"),A.location.hostname,[]),k=!1,S=!1,a=!1;A.isInitializedStamped=!1;var x={};A.globalOptionsStamped={},A.globalOptionsStampedRewards={},A.globalDataStampedRewards={};var C,n,d,l,p,c,m,u,h,g,f,v,w,t=[],b="html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video { margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline; }";function z(e){if("click"===e.type)return!0;if("keypress"!==e.type)return!1;var t=e.charCode||e.keyCode;return 32===t||13===t||void 0}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}A.stampedMobileCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||A.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},String.prototype.formatStringStamped=function(){for(var e=this,t=0;t<arguments.length;t++){var a=new RegExp("\\{"+t+"\\}","gi");e=e.replace(a,arguments[t])}return e},function(){if("function"==typeof A.CustomEvent)return;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=q.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}e.prototype=A.Event.prototype,A.CustomEvent=e}(),A.lazyLoadOptions={elements_selector:".stamped-lazyload"},A.addEventListener("LazyLoad::Initialized",function(e){A.LazyLoadStamped=e.detail.instance},!1);var e,_,T;!function(){"use strict";function i(e,t){var a,s=new e(t);try{a=new CustomEvent("LazyLoad::Initialized",{detail:{instance:s}})}catch(e){(a=q.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:s})}try{A.dispatchEvent(a)}catch(t){}}function c(e,t){return e.getAttribute("data-"+t)}function r(e,t,a){var s="data-"+t;null!==a?e.setAttribute(s,a):e.removeAttribute(s)}function n(e){return"true"===c(e,"was-processed")}function m(e,t){return r(e,"ll-timeout",t)}function u(e){return c(e,"ll-timeout")}function h(e,t){e&&e(t)}function g(e,t){e._loadingCount+=t,0===e._elements.length&&0===e._loadingCount&&h(e._settings.callback_finish)}function s(e){for(var t,a=[],s=0;t=e.children[s];s+=1)"SOURCE"===t.tagName&&a.push(t);return a}function a(e,t,a){a&&e.setAttribute(t,a)}function o(e,t){a(e,"sizes",c(e,t.data_sizes)),a(e,"srcset",c(e,t.data_srcset)),a(e,"src",c(e,t.data_src))}function l(e,t){_?e.classList.add(t):e.className+=(e.className?" ":"")+t}function d(e,t,a){e.addEventListener(t,a)}function p(e,t,a){e.removeEventListener(t,a)}function f(e,t,a){p(e,"load",t),p(e,"loadeddata",t),p(e,"error",a)}function v(e,t,a){var s,i,r=a._settings,n=t?r.class_loaded:r.class_error,o=t?r.callback_loaded:r.callback_error,d=e.target;s=d,i=r.class_loading,_?s.classList.remove(i):s.className=s.className.replace(new RegExp("(^|\\s+)"+i+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,""),l(d,n),h(o,d),g(a,-1)}function w(a,s){function i(e){v(e,!0,s),f(a,i,n)}var e,t,r,n=function e(t){v(t,!1,s),f(a,i,e)};r=n,d(e=a,"load",t=i),d(e,"loadeddata",t),d(e,"error",r)}function b(e,t){var a=t._observer;U(e,t),a&&t._settings.auto_unobserve&&a.unobserve(e)}function y(e){var t=u(e);t&&(clearTimeout(t),m(e,null))}function k(p){return!!C&&(p._observer=new IntersectionObserver(function(e){e.forEach(function(e){return e.isIntersecting||0<e.intersectionRatio?(s=e.target,l=(i=p)._settings,h(l.callback_enter,s),void(l.load_delay?(r=s,o=(n=i)._settings.load_delay,(d=u(r))||(d=setTimeout(function(){b(r,n),y(r)},o),m(r,d))):b(s,i))):(t=e.target,a=p._settings,h(a.callback_exit,t),void(a.load_delay&&y(t)));var t,a,s,i,r,n,o,d,l})},{root:(e=p._settings).container===q?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}),!0);var e}function S(e,t){return(s=e||(a=t).container.querySelectorAll(a.elements_selector),Array.prototype.slice.call(s)).filter(function(e){return!n(e)});var a,s}function e(e,t){this._settings=j({},T,e),this._loadingCount=0,k(this),this.update(t)}var t=void 0!==A,x=t&&!("onscroll"in A)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),C=t&&"IntersectionObserver"in A,_=t&&"classList"in q.createElement("p"),T={elements_selector:"img",container:x||t?q:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"stamped-lazyload-loading",class_loaded:"stamped-lazyload-loaded",class_error:"stamped-lazyload-error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_reveal:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},I={IMG:function(e,t){var a=e.parentNode;a&&"PICTURE"===a.tagName&&s(a).forEach(function(e){o(e,t)}),o(e,t)},IFRAME:function(e,t){a(e,"src",c(e,t.data_src))},VIDEO:function(e,t){s(e).forEach(function(e){a(e,"src",c(e,t.data_src))}),a(e,"src",c(e,t.data_src)),e.load()}},O=["IMG","IFRAME","VIDEO"],U=function(e,t,a){var s=t._settings;!a&&n(e)||(-1<O.indexOf(e.tagName)&&(w(e,t),l(e,s.class_loading)),function(e,t){var a,s,i,r,n,o,d=t._settings,l=e.tagName,p=I[l];if(p)return p(e,d),g(t,1),t._elements=(a=t._elements,s=e,a.filter(function(e){return e!==s}));n=c(i=e,(r=d).data_src),o=c(i,r.data_bg),n&&(i.style.backgroundImage='url("'.concat(n,'")')),o&&(i.style.backgroundImage=o)}(e,t),r(e,"was-processed","true"),h(s.callback_reveal,e),h(s.callback_set,e))},F=["IMG","IFRAME"];e.prototype={update:function(e){var t,a=this,s=this._settings;this._elements=S(e,s),!x&&this._observer?(s.use_native&&"loading"in HTMLImageElement.prototype&&((t=this)._elements.forEach(function(e){-1!==F.indexOf(e.tagName)&&(e.setAttribute("loading","lazy"),U(e,t))}),this._elements=S(e,s)),this._elements.forEach(function(e){a._observer.observe(e)})):this.loadAll()},destroy:function(){var t=this;this._observer&&(this._elements.forEach(function(e){t._observer.unobserve(e)}),this._observer=null),this._elements=null,this._settings=null},load:function(e,t){U(e,this,t)},loadAll:function(){var t=this;this._elements.forEach(function(e){b(e,t)})}},t&&function(e,t){if(t)if(t.length)for(var a,s=0;a=t[s];s+=1)i(e,a);else i(e,t)}(e,A.lazyLoadOptions)}();function I(e,t){t?(fe("Using included jQ"),D=t,fe(A.jQueryStamped=D)):(fe("Loaded jQ"),A.jQueryStamped=D),/msie/.test(A.navigator.userAgent.toLowerCase())&&(D.support.cors=!0),D("head").append('<style>@media all{.featherlight{display:none;position:fixed;top:0;right:0;bottom:0;left:0;z-index:2147483647;text-align:center;white-space:nowrap;cursor:pointer;background:#333;background:rgba(0,0,0,0)}.featherlight:last-of-type{background:rgba(0,0,0,.8)}.featherlight:before{content:"";display:inline-block;height:100%;vertical-align:middle;margin-right:-.25em}.featherlight .featherlight-content{position:relative;text-align:left;vertical-align:middle;display:inline-block;overflow:auto;padding:25px 25px 0;border-bottom:25px solid transparent;margin-left:5%;margin-right:5%;max-height:95%;background:#fff;cursor:auto;white-space:normal}.featherlight .featherlight-inner{display:block}.featherlight .featherlight-close-icon{position:absolute;z-index:9999;top:0;right:0;line-height:25px;width:25px;cursor:pointer;text-align:center;font-family:Arial,sans-serif;background:#fff;background:rgba(255,255,255,.3);color:#000}.featherlight .featherlight-image{width:100%}.featherlight-iframe .featherlight-content{border-bottom:0;padding:0}.featherlight iframe{border:0}.featherlight *{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}} @media only screen and (max-width:1024px){.featherlight .featherlight-content{margin-left:10px;margin-right:10px;max-height:98%;padding:10px 10px 0;border-bottom:10px solid transparent}} @media all{.featherlight .featherlight-content{padding:0;border:none;min-width:inherit}.featherlight .featherlight-image{max-width:100%;border:20px solid #fff; max-width: 100%;max-height: 100%;width: auto;}}@media only screen and (max-width:1024px){.featherlight .featherlight-content{padding:0;border:none}}</style>'),D("head").append("<style>@media all{.featherlight-next,.featherlight-previous{display:block;position:absolute;top:25px;right:25px;bottom:25px;left:80%;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:rgba(0,0,0,0)}.featherlight-previous{left:25px;right:80%}.featherlight-next:hover,.featherlight-previous:hover{background:rgba(255,255,255,.25)}.featherlight-next span,.featherlight-previous span{display:none;position:absolute;top:50%;left:5%;width:82%;text-align:center;font-size:30px;line-height:80px;margin-top:-40px;color:#fff;font-family:arial;font-style:normal;font-weight:400}.featherlight-next span{right:5%;left:auto}.featherlight-next:hover span,.featherlight-previous:hover span{display:inline-block}.featherlight-loading .featherlight-next,.featherlight-loading .featherlight-previous{display:none}}@media only screen and (max-device-width:1024px){.featherlight-next:hover,.featherlight-previous:hover{background:0 0}.featherlight-next span,.featherlight-previous span{display:block}}@media only screen and (max-width:1024px){.featherlight-next,.featherlight-previous{top:10px;right:10px;left:85%}.featherlight-previous{left:10px;right:85%}.featherlight-next span,.featherlight-previous span{margin-top:-30px;font-size:40px}}</style>");try{!function(p){"use strict";function s(e,t){if(!(this instanceof s)){var a=new s(e,t);return a.open(),a}this.id=s.id++,this.setup(e,t),this.chainCallbacks(s._callbackChain)}if(void 0!==p){var i=[],r=function(t){return i=p.grep(i,function(e){return e!==t&&0<e.$instance.closest("body").length})},n={allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,name:1,referrerpolicy:1,scrolling:1,sandbox:1,src:1,srcdoc:1,width:1},a={keyup:"onKeyUp",resize:"onResize"},o=function(e){p.each(s.opened().reverse(),function(){return e.isDefaultPrevented()||!1!==this[a[e.type]](e)?void 0:(e.preventDefault(),e.stopPropagation(),!1)})},d=function(e){if(e!==s._globalHandlerInstalled){s._globalHandlerInstalled=e;var t=p.map(a,function(e,t){return t+"."+s.prototype.namespace}).join(" ");p(A)[e?"on":"off"](t,o)}};s.prototype={constructor:s,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:p.noop,beforeContent:p.noop,beforeClose:p.noop,afterOpen:p.noop,afterContent:p.noop,afterClose:p.noop,onKeyUp:p.noop,onResize:p.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(e,t){"object"!=typeof e||e instanceof p!=0||t||(t=e,e=void 0);var a=p.extend(this,t,{target:e}),s=a.resetCss?a.namespace+"-reset":a.namespace,i=p(a.background||['<div class="'+s+"-loading "+s+'">','<div class="'+s+'-content">','<button class="'+s+"-close-icon "+a.namespace+'-close" aria-label="Close">',a.closeIcon,"</button>",'<div class="'+a.namespace+'-inner">'+a.loading+"</div>","</div>","</div>"].join("")),r="."+a.namespace+"-close"+(a.otherClose?","+a.otherClose:"");return a.$instance=i.clone().addClass(a.variant),a.$instance.on(a.closeTrigger+"."+a.namespace,function(e){var t=p(e.target);("background"===a.closeOnClick&&t.is("."+a.namespace)||"anywhere"===a.closeOnClick||t.closest(r).length)&&(a.close(e),e.preventDefault())}),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;function e(e){return t.$currentTarget&&t.$currentTarget.attr(e)}var t=this,a=this.constructor.contentFilters,s=e(t.targetAttr),i=t.target||s||"",r=a[t.type];if(!r&&i in a&&(r=a[i],i=t.target&&s),i=i||e("href")||"",!r)for(var n in a)t[n]&&(r=a[n],i=t[n]);if(!r){var o=i;if(i=null,p.each(t.contentFilters,function(){return(r=a[this]).test&&(i=r.test(o)),!i&&r.regex&&o.match&&o.match(r.regex)&&(i=o),!i}),!i)return"console"in A&&A.console.error("Featherlight: no content filter found "+(o?' for "'+o+'"':" (no target specified)")),!1}return r.process.call(t,i)},setContent:function(e){var t=this;return e.is("iframe")&&t.$instance.addClass(t.namespace+"-iframe"),t.$instance.removeClass(t.namespace+"-loading"),t.$instance.find("."+t.namespace+"-inner").not(e).slice(1).remove().end().replaceWith(p.contains(t.$instance[0],e[0])?"":e),t.$content=e.addClass(t.namespace+"-inner"),t},open:function(t){var a=this;if(a.$instance.hide().appendTo(a.root),!(t&&t.isDefaultPrevented()||!1===a.beforeOpen(t))){t&&t.preventDefault();var e=a.getContent();if(e)return i.push(a),d(!0),a.$instance.fadeIn(a.openSpeed),a.beforeContent(t),p.when(e).always(function(e){a.setContent(e),a.afterContent(t)}).then(a.$instance.promise()).done(function(){a.afterOpen(t)})}return a.$instance.detach(),p.Deferred().reject().promise()},close:function(e){var t=this,a=p.Deferred();return!1===t.beforeClose(e)?a.reject():(0===r(t).length&&d(!1),t.$instance.fadeOut(t.closeSpeed,function(){t.$instance.detach(),t.afterClose(e),a.resolve()})),a.promise()},resize:function(e,t){if(e&&t){this.$content.css("width","").css("height","");var a=Math.max(e/(parseInt(this.$content.parent().css("width"),10)-1),t/(parseInt(this.$content.parent().css("height"),10)-1));1<a&&(a=t/Math.floor(t/a),this.$content.css("width",e/a+"px").css("height",t/a+"px"))}},chainCallbacks:function(e){for(var t in e)this[t]=p.proxy(e[t],this,p.proxy(this[t],this))}},p.extend(s,{id:0,autoBind:"[data-featherlight]",defaults:s.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(e){return e instanceof p&&e},process:function(e){return!1!==this.persist?p(e):p(e).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp|svg)(\?\S*)?$/i,process:function(e){var t=p.Deferred(),a=new Image,s=p('<img src="'+e+'" alt="" class="'+this.namespace+'-image" />');return a.onload=function(){s.naturalWidth=a.width,s.naturalHeight=a.height,t.resolve(s)},a.onerror=function(){t.reject(s)},a.src=e,t.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(e){return p(e)}},ajax:{regex:/./,process:function(e){var a=p.Deferred(),s=p("<div></div>").load(e,function(e,t){"error"!==t&&a.resolve(s.contents()),a.fail()});return a.promise()}},iframe:{process:function(e){var t=new p.Deferred,a=p("<iframe/>"),s=function(e,t){var a={},s=new RegExp("^"+t+"([A-Z])(.*)");for(var i in e){var r=i.match(s);if(r)a[(r[1]+r[2].replace(/([A-Z])/g,"-$1")).toLowerCase()]=e[i]}return a}(this,"iframe"),i=function(e,t){var a={};for(var s in e)s in t&&(a[s]=e[s],delete e[s]);return a}(s,n);return a.hide().attr("src",e).attr(i).css(s).on("load",function(){t.resolve(a.show())}).appendTo(this.$instance.find("."+this.namespace+"-content")),t.promise()}},text:{process:function(e){return p("<div>",{text:e})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(e,t){var s=this,i=new RegExp("^data-"+t+"-(.*)"),r={};return e&&e.attributes&&p.each(e.attributes,function(){var e=this.name.match(i);if(e){var t=this.value,a=p.camelCase(e[1]);if(0<=p.inArray(a,s.functionAttributes))t=new Function(t);else try{t=JSON.parse(t)}catch(e){}r[a]=t}}),r},extend:function(e,t){function a(){this.constructor=e}return a.prototype=this.prototype,e.prototype=new a,e.__super__=this.prototype,p.extend(e,this,t),e.defaults=e.prototype,e},attach:function(i,r,n){var o=this;"object"!=typeof r||r instanceof p!=0||n||(n=r,r=void 0);function e(e){var t=p(e.currentTarget),a=p.extend({$source:i,$currentTarget:t},o.readElementConfig(i[0],l.namespace),o.readElementConfig(e.currentTarget,l.namespace),n),s=d||t.data("featherlight-persisted")||new o(r,a);"shared"===s.persist?d=s:!1!==s.persist&&t.data("featherlight-persisted",s),a.$currentTarget.blur&&a.$currentTarget.blur(),s.open(e)}var d,t=(n=p.extend({},n)).namespace||o.defaults.namespace,l=p.extend({},o.defaults,o.readElementConfig(i[0],t),n);return i.on(l.openTrigger+"."+l.namespace,l.filter,e),e},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var t=this;return r(),p.grep(i,function(e){return e instanceof t})},close:function(e){var t=this.current();return t?t.close(e):void 0},_onReady:function(){var t=this;t.autoBind&&(p(t.autoBind).each(function(){t.attach(p(this))}),p(q).delegate(t.autoBind,"click",function(e){e.isDefaultPrevented()||t.attach(p(e.currentTarget))(e)}))},_callbackChain:{onKeyUp:function(e,t){return 27===t.keyCode?(this.closeOnEsc&&p.featherlight.close(t),!1):e(t)},beforeOpen:function(e,t){return this._previouslyActive=q.activeElement,this._$previouslyTabbable=p("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=p("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(e,t){return p(t).attr("tabindex")}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),q.activeElement.blur&&q.activeElement.blur(),e(t)},afterClose:function(e,t){var a=e(t),s=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each(function(e,t){p(t).attr("tabindex",s._previousWithTabIndices[e])}),this._previouslyActive.focus(),a},onResize:function(e,t){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),e(t)},afterContent:function(e,t){var a=e(t);return this.$instance.find("[autofocus]:not([disabled])").focus(),this.onResize(t),a}}}),p.featherlight=s,p.fn.featherlight=function(e,t){return s.attach(this,e,t),this},p(q).ready(function(){s._onReady()})}else"console"in A&&A.console.info("Too much lightness, Featherlight needs jQuery.")}(D),function(r){"use strict";function s(e,t){if(!(this instanceof s)){var a=new s(r.extend({$source:e,$currentTarget:e.first()},t));return a.open(),a}r.featherlight.apply(this,arguments),this.chainCallbacks(o)}function e(e){A.console&&A.console.log}if(void 0===r)return e();if(!r.featherlight)return e();var t="ontouchstart"in A||A.DocumentTouch&&q instanceof DocumentTouch,a=r.event&&r.event.special.swipeleft&&r,i=A.Hammer&&function(e){var t=new A.Hammer.Manager(e[0]);return t.add(new A.Hammer.Swipe),t},n=t&&(a||i);t&&!n&&e();var o={afterClose:function(e,t){var a=this;return a.$instance.off("next."+a.namespace+" previous."+a.namespace),a._swiper&&(a._swiper.off("swipeleft",a._swipeleft).off("swiperight",a._swiperight),a._swiper=null),e(t)},beforeOpen:function(e,t){var a=this;return a.$instance.on("next."+a.namespace+" previous."+a.namespace,function(e){var t="next"===e.type?1:-1;a.navigateTo(a.currentNavigation()+t)}),n&&(a._swiper=n(a.$instance).on("swipeleft",a._swipeleft=function(){a.$instance.trigger("next")}).on("swiperight",a._swiperight=function(){a.$instance.trigger("previous")}),a.$instance.addClass(this.namespace+"-swipe-aware",n)),a.$instance.find("."+a.namespace+"-content").append(a.createNavigation("previous")).append(a.createNavigation("next")),e(t)},beforeContent:function(e,t){var a=this.currentNavigation(),s=this.slides().length;return this.$instance.toggleClass(this.namespace+"-first-slide",0===a).toggleClass(this.namespace+"-last-slide",a===s-1),e(t)},onKeyUp:function(e,t){var a={37:"previous",39:"next"}[t.keyCode];return a?(this.$instance.trigger(a),!1):e(t)}};r.featherlight.extend(s,{autoBind:"[data-featherlight-gallery]"}),r.extend(s.prototype,{previousIcon:"&#9664;",nextIcon:"&#9654;",galleryFadeIn:100,galleryFadeOut:300,slides:function(){return this.filter?this.$source.find(this.filter):this.$source},images:function(){return e(),this.slides()},currentNavigation:function(){return this.slides().index(this.$currentTarget)},navigateTo:function(e){var t=this,a=t.slides(),s=a.length,i=t.$instance.find("."+t.namespace+"-inner");return e=(e%s+s)%s,t.$currentTarget=a.eq(e),t.beforeContent(),r.when(t.getContent(),i.fadeTo(t.galleryFadeOut,.2)).always(function(e){t.setContent(e),t.afterContent(),e.fadeTo(t.galleryFadeIn,1)})},createNavigation:function(e){var t=this;return r('<span title="'+e+'" class="'+this.namespace+"-"+e+'"><span>'+this[e+"Icon"]+"</span ></span > ").click(function(){r(this).trigger(e+"."+t.namespace)})}}),r.featherlightGallery=s,r.fn.featherlightGallery=function(e){return s.attach(this,e),this},r(q).ready(function(){s._onReady()})}(D)}catch(e){}1!=A.stamped_disable_font&&D("head").append(D("<link/>",{rel:"stylesheet",href:"//fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap",type:"text/css"})),fe("Library Starting..."),D.isReady?O():D(q).ready(function(){O()}),setTimeout(function(){a||(fe("Library not started, fallback"),O())},3e3);D.featherlight.defaults.afterOpen=function(e){var t=D(this.$source[0]),a=D(this.$instance[0]);if("#stamped-modal-new"==this.$currentTarget.attr("data-featherlight")){var s=t.closest(".stamped-review-card"),i=D("#stamped-modal-new",a),r=D(".stamped-modal-photo",i),n=D(".stamped-modal-photo > .stamped-modal-photo-bg",i),o=D(".stamped-modal-review-date",i),d=D(".stamped-modal-review-rating",i),l=D(".stamped-modal-review-title",i),p=D(".stamped-modal-review-body",i),c=D(".stamped-modal-review-author",i),m=D(".stamped-modal-review-product a",i),u=D(".stamped-modal-review-share",i),h=D(".stamped-modal-review-vote",i);o.html(D(".stamped-reviews-date",s).html()),d.html(D(".stamped-reviews-rating",s).html()),l.html(D(".stamped-reviews-title",s).html()),p.html(D(".stamped-reviews-message",s).html()),c.html(D(".stamped-reviews-author",s).html()),m.attr("href",D(".stamped-reviews-product",s).attr("href")).html(D(".stamped-reviews-product",s).html()),h.html(D(".stamped-reviews-vote",s).html());var g=[];D(".stamped-reviews-message-image-block a",s).each(function(){g.push(D(this).attr("href"))});var f=t.attr("href"),v=g.indexOf(f),w=g[v];n.css("background-image","url("+w+")"),1<g.length&&(D(".stamped-modal-photo-arrow-right, .stamped-modal-photo-arrow-left",r).show(),D(".stamped-modal-photo-arrow-right, .stamped-modal-photo-arrow-left",r).on("click",function(){"left"===D(this).attr("data-dir")?v--:v++,(v<=0||v>g.length-1)&&(v=0);var e=g[v];n.css("background-image","url("+e+")")}));var b=D(".stamped-reviews-rating .fa-star",s).length,y=p.html(),k=D(".stamped-reviews-product",s).attr("href"),S=D(".stamped-reviews-title",s).text();if(k){var x="https://www.facebook.com/dialog/feed?app_id=222664514734026&caption="+oe("★",b)+"&description="+encodeURIComponent(y)+"&display=popup&link="+encodeURIComponent(k)+"&name="+encodeURIComponent(S)+"&redirect_uri=https://stamped.io/shares?productId=",C="https://twitter.com/intent/tweet?text="+y.substr(0,140)+"&url="+encodeURIComponent(k),_="https://plus.google.com/share?url="+encodeURIComponent(k);D("<a>").text("Facebook").attr("href",x).attr("target","_blank").appendTo(u),D("<a>").text("Twitter").attr("href",C).attr("target","_blank").appendTo(u),D("<a>").text("Google").attr("href",_).attr("target","_blank").appendTo(u)}}}}function O(){fe("Started library"),Z(q,"stamped:init:starting"),U(),F(),a=!0}function U(){var t=!1;if(fe("Starting UGC..."),(C=D("#stamped-main-widget")).length){if(D.trim(C.html())){K(),Q(),V(),G(),M();try{A.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(e){}D(q).on("click keypress",".stamped-review-read-more",function(e){if(!0===z(e)){D(this).closest(".stamped-review-content-body").find(".stamped-review-read-more").hide();var t=D(this).closest(".stamped-review-content-body").find(".original-review").html();D(this).closest(".stamped-review-content-body").html(t),A.macyInstanceStamped&&A.macyInstanceStamped.reInit()}})}else W();D(q).on("click keypress",".stamped-summary-ratings .summary-rating",function(e){if(!0===z(e)){var t=D(this).find(".summary-rating-bar"),a=t.attr("data-rating"),s=t.hasClass("selected");D(".stamped-summary-ratings .summary-rating").each(function(){D(this).removeClass("selected")}),D(".summary-rating-bar").each(function(){D(this).removeClass("selected")}),a&&(s?(le(1),D(".stamped-summary-ratings").removeClass("selected")):(t.addClass("selected"),D(this).addClass("selected"),D(".stamped-summary-ratings").addClass("selected"),le(1,a)))}}),D(q).on("mouseover mouseout",".stamped-form-review-rating a.fa",function(e){var t,a,s;t=e.currentTarget,s=D(t).attr("data-value"),a=D(t).parent(),"mouseover"===e.type?(a.find("a.fa:lt("+s+")").removeClass("fa-star-o").addClass("fa-star"),a.find("a.fa:gt("+(s-1)+")").removeClass("spr-icon-star-hover").addClass("fa-star-o")):a.find("a.fa").removeClass("fa-star").addClass("fa-star-o")}),D(q).on("click keypress",".stamped-tabs li",function(e){!0===z(e)&&ee(this)}),D(q).on("click keypress","#shopry-rating-wrapper a.shopry-thumbs-up, #shopry-rating-wrapper a.shopry-thumbs-down, #shopry-rating-holder a.shopry-thumbs-up, #shopry-rating-holder a.shopry-thumbs-down, #stamped-rating-holder a.stamped-thumbs-up, #stamped-rating-holder a.stamped-thumbs-down, .stamped-rating-holder a.stamped-thumbs-up, .stamped-rating-holder a.stamped-thumbs-down",function(e){if(!0===z(e)){var t=D(this).attr("data-review-id"),a=D(this).attr("data-rating"),s=C.attr("data-product-id"),i=D(this);i.parent().fadeTo("slow",.3),i.addClass("disable-link"),D.ajax({type:"POST",url:y+"/reviews/vote",data:{productId:s,reviewId:t,vote:a,apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl},success:function(e){if(1==e||-1==e){var t=i.find(".stamped-fa").html();t=t.replace("&nbsp;","").trim();var a=parseInt(t);i.find(".stamped-fa").html("&nbsp; "+(a+e))}i.parent().fadeTo("slow",1),i.removeClass("disable-link")}})}}),D(q).on("click keypress",".stamped-share-button,.stamped-share-icon",function(e){!0===z(e)&&D(this).parent().find(".stamped-share-links").fadeToggle()}),D(q).on("click keypress",".stamped-summary-actions-mobile-filter",function(e){if(!0===z(e)){var t=D(".stamped-filters-wrapper");t.hasClass("stamped-mobile-visible")?(t.slideUp(),t.removeClass("stamped-mobile-visible")):(t.slideDown(),t.addClass("stamped-mobile-visible"))}}),D(q).on("click keypress",".stamped-summary-keywords-list li",function(e){if(!0===z(e)){var t=D(this);t.hasClass("selected")?(D(".stamped-summary-keywords-list li").removeClass("selected"),D(C).removeAttr("data-keyword")):(D(".stamped-summary-keywords-list li").removeClass("selected"),t.addClass("selected"),D(C).attr("data-keyword",t.text().trim())),D(".stamped-summary-actions-clear").show(),le(1)}}),D(q).on("change keyup",".stamped-reviews-search-input",function(e){var t=D(this).val();t?(D(".stamped-reviews-search-clear").show(),D(".stamped-reviews",C).attr("data-filtered","true")):(D(".stamped-reviews-search-clear").hide(),D(".stamped-reviews",C).removeAttr("data-filtered")),13==e.keyCode&&t&&(D(C).attr("data-search",t.trim()),D(".stamped-summary-actions-clear").show(),le(1))}),D(q).on("click keypress",".stamped-summary-actions-clear",function(e){!0===z(e)&&pe()}),D(q).on("click keypress",".stamped-reviews-search-clear",function(e){!0===z(e)&&(D(".stamped-reviews-search-clear").hide(),D(".stamped-reviews-search-input").val(""),D(C).removeAttr("data-search"),le(1))}),D(q).on("stamped:reviews:loaded",function(e){fe("Main Widget event triggered reload"),!1===t&&(K(),Q(),V(),D(q).on("click keypress",".stamped-review-read-more",function(e){if(!0===z(e)){D(this).closest(".stamped-review-content-body").find(".stamped-review-read-more").hide();var t=D(this).closest(".stamped-review-content-body").find(".original-review").html();D(this).closest(".stamped-review-content-body").html(t),A.macyInstanceStamped&&A.macyInstanceStamped.reInit()}})),G(),M();try{A.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(e){}t=!0})}P(),B();var e,a=ge("stamped_r_id");a&&1!=A.stamped_disable_review_single&&(e=a,D.ajax({type:"GET",url:y+"/widget/reviews",data:{reviewIds:e,apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,type:"single",showAvatar:"True",minRating:1},success:function(e){e.data.length&&StampedFn.openUGCModal(e.data,0,q,1,!1,0)},error:function(e){}}))}function F(e){fe("Starting Rewards...");var t=D("#stamped-rewards-init");0<t.length&&(fe("Loading Rewards..."),A.globalOptionsStampedRewards={customerId:t.data("customer-id"),customerEmail:t.data("customer-email"),customerFirstName:t.data("customer-first-name"),customerLastName:t.data("customer-last-name"),totalOrders:0,totalSpent:0,isAcceptMarketing:t.data("customer-accepts-marketing"),authToken:t.data("key-auth")},function(e){var t=A.mainWidgetMetafields||"";A.globalOptionsStampedRewards&&t&&(A.globalOptionsStampedRewards.metafields=t);var a=JSON.stringify(A.globalOptionsStampedRewards);D.ajax({type:"POST",url:y+"/v2/rewards/init?"+D.param({apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,debug:null,isTest:e,isPreview:1==A.isStampedLauncherPreview}),xhrFields:{withCredentials:!0},data:a,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e,t,a){var s;A.globalDataStampedRewards=e,D("#stamped-rewards-init").html(A.globalDataStampedRewards.html.main),function(){p=D(".stamped-rewards-launcher",n),c=D(".stamped-launcher-button",n),$launcherCss=D("#stamped-rewards-main-css",n).clone(),g=D("<iframe>");var s=c.html();fe("Func _buildIframeLauncher: width:"+c.width(),1),fe("Func _buildIframeLauncher: outerWidth:"+c.outerWidth(),1),fe("Func _buildIframeLauncher: var launcherWidth:"+(h=c.width()+40),1),c.width(h),c.html(g),p.hide(),setTimeout(function(){f=g[0].contentWindow.document;var e=D("body",f),t=D("head",f);e.html(s),e.append($launcherCss),t.append(D("<link/>",{rel:"stylesheet",href:"//cdn1.stamped.io/files/widget.min.css?"+r,type:"text/css"})).append(D("<link/>",{rel:"stylesheet",href:"//fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap",type:"text/css"}));var a=f.createElement("script");a.type="text/javascript",a.src="//kit.fontawesome.com/59de3073ed.js",f.body.appendChild(a),t.append("<style>"+b+' body { overflow:hidden; } .stamped-launcher-icon-opened { font-family:"Open Sans"; display:inline-block;padding: 16px 0px; width: 100%; text-align:center;}</style>'),A.stampedMobileCheck()&&e.attr("data-mobile",!0),m=D(".stamped-launcher-icon-closed",e),u=D(".stamped-launcher-icon-opened",e),setTimeout(function(){p.fadeIn()},1e3)},1)}(),function(){d=D(".stamped-rewards-base",n),$launcherCss=D("#stamped-rewards-main-css",n).clone(),v=D("<iframe>");var s=d.html();d.html(v),setTimeout(function(){w=v[0].contentWindow.document,v[0].contentWindow.StampedFn=StampedFn,v[0].contentWindow.jQuery=jQuery;var e=D("body",w),t=D("head",w);e.html(s),e.append($launcherCss),t.append(D("<link/>",{rel:"stylesheet",href:"//cdn1.stamped.io/files/widget.min.css",type:"text/css"})).append(D("<link/>",{rel:"stylesheet",href:"//fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap",type:"text/css"}));var a=w.createElement("script");a.type="text/javascript",a.src="//kit.fontawesome.com/59de3073ed.js",a.setAttribute("data-observe-mutations","true"),w.body.appendChild(a),e.append("<style>"+b+' .stamped-rewards-window { font-family:"Open Sans"; }</style>'),A.stampedMobileCheck()&&e.attr("data-mobile",!0),A.globalDataStampedRewards.customer&&A.globalDataStampedRewards.customer.customerEmail?e.attr("data-logged-in",!0):e.attr("data-logged-in",!1),1==A.globalDataStampedRewards.branding&&e.attr("data-branding",!0),$wrapperCards=D("#stamped-rewards-cards",w),$wrapperViews=D("#stamped-rewards-views",w),D(w).on("click",".stamped-rewards-header-close",function(){R()}),D(w).on("click",'[data-campaign-completed="false"] .stamped-reward-card-button-earn',function(){var s,i,e,r,n,t,o,a=D(this).parent(".stamped-rewards-card-earn"),d=a.data("campaign-id"),l=a.data("event-type");if("AccountBirthday"==l){var p=D(".stamped-rewards-birthday-input-holder",w);p.show();var c=D(".stamped-rewards-birthday-input-holder input",w).val();c&&(r=D(this),n=a,t=c,o=function(){p.hide()},N(r,"loading",!0),D.ajax({type:"POST",url:y+"/v2/rewards/addBirthday?"+D.param({apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,dateBirthday:t}),data:A.globalOptionsStampedRewards,success:function(e,t,a){n.attr("data-campaign-completed","true"),N(r,"active",!0),o()}}))}else"Review"==l||"ReviewPhoto"==l||"ReviewVideo"==l?(D('.stamped-rewards-header-menu span[data-target="reviews"]',w).trigger("click"),L("main")):(s=D(this),i=a,e=d,N(s,"loading",!0),D.ajax({type:"POST",url:y+"/v2/rewards/add?"+D.param({apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,campaignId:e}),data:A.globalOptionsStampedRewards,dataType:"json",success:function(e,t,a){console.log(e),1==e&&i.attr("data-campaign-completed","true"),N(s,"active",!0),E()}}),"SocialFollowInstagram"!=l&&"SocialFollowFacebook"!=l&&"SocialShareFacebook"!=l&&"SocialFollowTwitter"!=l&&"SocialShareTwitter"!=l||function(e){var t=A.globalDataStampedRewards.links;if("SocialFollowInstagram"==e){A.open(t.instagram,"_blank").focus()}else if("SocialFollowFacebook"==e)A.open("https://www.facebook.com/plugins/page.php?href="+t.facebook,"_blank","location=yes,height=250,width=340,top=50,left=50,scrollbars=yes,status=yes");else if("SocialShareFacebook"==e)A.open("https://www.facebook.com/sharer/sharer.php?u="+t.shop,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes");else if("SocialFollowTwitter"==e){A.open(t.twitter,"_blank").focus()}else"SocialShareTwitter"==e&&A.open("https://twitter.com/intent/tweet?url="+t.shop,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes")}(l))}),D(w).on("click",'[data-campaign-redeemable="true"] .stamped-reward-card-button-spend',function(){var e,t,a=D(this).parent(".stamped-rewards-card-spend"),s=a.data("campaign-id");a.data("event-type");e=D(this),t=s,N(e,"loading",!0),D.ajax({type:"POST",url:y+"/v2/rewards/redeem?"+D.param({apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,campaignId:t}),data:A.globalOptionsStampedRewards,dataType:"json",success:function(e,t,a){console.log(e),e.result,L("view-coupon",null,e.rewardCampaignCoupon),E()}})}),D(w).on("click",".stamped-reward-referral-platforms button",function(){var e,t=D(this).attr("href");t&&(e=t,A.open(e,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes"))}),D(w).on("click",".stamped-rewards-header-menu span",function(){var e=D(this).attr("data-target");e!=$wrapperCards.attr("data-target")&&($wrapperCards.attr("data-target",e),$(e),D(".stamped-rewards-content-container",w).scrollTop(0),D(".stamped-rewards-header-menu .active",w).removeClass("active"),D(this,w).addClass("active"))}),D(".stamped-rewards-content-container",w).on("scroll",function(){var e=D(".stamped-rewards-content-container",w).scrollTop();if(60<e)D(".stamped-rewards-background",w).height("70"),D(".stamped-rewards-header",w).height("70");else if(e<10)D(".stamped-rewards-background",w).height("200"),D(".stamped-rewards-header",w).height("110");else{var t=200;t-=e,D(".stamped-rewards-background",w).height(t);var a=110;a-=e,D(".stamped-rewards-header",w).height(a)}}),$("rewards"),Z(q,"stamped:launcher:loaded")},1)}(),s=e,D("#stamped-rewards-points-placeholder").html(s.points.points_current_with_name).attr("onclick","StampedFn.toggleRewardsModal();")}})}(e))}function R(){var e=d.hasClass("opened");D("body",w).addClass("opened"),e?(fe("Func _toggleRewardsModal: var launcherWidth:"+h,1),d.removeClass("opened"),d.fadeOut(),p.removeClass("opened"),m.removeClass("rotateIn"),m.addClass("rotateOut"),u.removeClass("fadeOut"),u.addClass("fadeIn"),c.animate({width:h+"px"},0),setTimeout(function(){L("main")},1e3),Z(q,"stamped:launcher:closed")):(d.addClass("opened"),p.addClass("opened"),d.fadeIn(),m.addClass("rotateIn"),m.removeClass("rotateOut"),u.addClass("fadeOut"),u.removeClass("fadeIn"),c.animate({width:"40px"},0),Z(q,"stamped:launcher:opened"),"true"!=re("stamped-launcher-opened")&&(D.ajax({type:"POST",url:y+"/tracking/event?"+D.param({apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,source:"launcher",event:"open"}),dataType:"json",success:function(e,t,a){console.log(e)}}),ie("stamped-launcher-opened",!0,30)))}function E(){D.ajax({type:"POST",url:y+"/v2/rewards/points?"+D.param({apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl}),data:A.globalOptionsStampedRewards,dataType:"json",success:function(e,t,a){setTimeout(function(){D(".stamped-rewards-header-main-points, .stamped-rewards-header-small-points",w).html(e.points_current_with_name)},5e3)}})}function $(e){$wrapperCards.html(""),D("body",w).attr("data-view",e);for(var t=0;t<A.globalDataStampedRewards.html.cards.length;t++){var a=A.globalDataStampedRewards.html.cards[t];if(a&&a.html&&e==a.type){var s=D(a.html);s.attr("data-key",a.key),$wrapperCards.append(s)}}}function L(e,t,a){if(l=D(".stamped-rewards-window",w),D(".stamped-rewards-content-container",w).scrollTop(0),D(".stamped-rewards-header-nav",w).attr("onclick","StampedFn.loadLauncherView('main');"),D("body",w).attr("data-view",e),l){if("main"==e)l.removeClass("stamped-rewards-nav-small"),l.addClass("stamped-rewards-nav-big"),D(".stamped-rewards-header-main, .stamped-rewards-header-menu",w).fadeIn(),D(".stamped-rewards-header-small",w).hide(),D(".stamped-rewards-header",w).height("110"),D(".stamped-rewards-background",w).height("200"),$wrapperViews.hide(),$wrapperCards.fadeIn();else{for(var s=0;s<A.globalDataStampedRewards.html.views.length;s++){var i=A.globalDataStampedRewards.html.views[s];if(i.key==e){var r=D(i.html);D("#stamped-rewards-views",w).html(r),l.addClass("stamped-rewards-nav-small"),l.removeClass("stamped-rewards-nav-big"),D(".stamped-rewards-header-main, .stamped-rewards-header-menu",w).hide(),D(".stamped-rewards-header-small",w).fadeIn(),$wrapperCards.hide(),$wrapperViews.fadeIn()}}!function(e){if(A.globalDataStampedRewards&&A.globalDataStampedRewards.customer&&"view-earnings"==e){var t=D('[data-event-type="AccountBirthday"]',w);if(t.length)A.globalDataStampedRewards.customer.dateBirthday?t.attr("data-birthday","true"):(t.attr("data-birthday","false"),t.prepend(D('<div class="stamped-rewards-birthday-input-holder"> Enter your birthday: <input type="date" class="stamped-rewards-birthday-input"> </div>').hide()))}}(e)}n=e,o=a,d=D(t).attr("data-title"),"view-coupon"==n?(D(".stamped-reward-coupon-code",$wrapperViews).text(o.couponCode),D(".stamped-reward-card-title",$wrapperViews).text(o.title),function(e){D(".stamped-rewards-header-nav",w).attr("onclick","StampedFn.loadLauncherView('"+e+"');")}("view-your-rewards")):d&&function(e){D(".stamped-rewards-header-small-title",w).text(e)}(d)}var n,o,d}function N(t,e,a){if("loading"==e){var s=t.width();t.attr("data-original-text",t.text()),t.addClass("stamped-button-disabled"),10<=s&&t.width(s),t.html('<span class="stamped-button-icon stamped-button-loading"></span>')}else a?(t.html(""),t.width("auto")):t.html('<span class="stamped-button-icon stamped-button-completed"></span>'),setTimeout(function(){var e=t.attr("data-original-text");t.html(e),t.removeClass("stamped-button-disabled"),t.width("auto")},7878)}function M(){fe("Func initWidgetType");var e=D(".stamped-container",C).attr("data-widget-style");if("slider"==e){fe(T=D(".stamped-reviews",C),1);var t=T&&T.hasClass("slick-initialized");if(fe("Func initWidgetType: var initialized:"+t,1),t){D(".stamped-reviews > .stamped-review",C).each(function(e,t){T.slick("slickAdd",t)});D('.stamped-reviews [class*="stamped-review"]',C).length<=0?D("button.slick-arrow").hide():D("button.slick-arrow").show()}else ve("https://cdn.shopify.com/s/files/1/0638/7747/files/slick.min.js",function(){T.slick({dots:!1,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:4,slide:".stamped-review",initialSlide:0,rows:0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}),T.on("afterChange",function(e,t,a){if(D(".slick-next.slick-arrow").hasClass("slick-disabled")){a;var s=D(".stamped-pagination .next a");s.length&&s.click()}})})}else"masonry"==e&&ve("https://cdn.shopify.com/s/files/1/0638/7747/files/macy2.js",function(){A.macyInstanceStamped=Macy({container:".stamped-reviews",margin:{x:15,y:15},breakAt:{1500:4,1200:3,700:2,500:1}}),Z(q,"stamped:macy:loaded")});if(D(".stamped-sort-select").length){var a=C.attr("data-sort")||D(".stamped-container",C).attr("data-widget-sort");a&&"none"!==D('.stamped-sort-select option[value="'+a+'"]').css("display")&&D(".stamped-sort-select").val(a)}}function W(e){C&&C.length&&!e||(C=D("#stamped-main-widget")),J()}function K(){fe("Creating Q&A"),Y()}function P(){!function(){var e;if(fe("Loading Badges..."),(t=D(".stamped-product-reviews-badge[data-id]")).length&&(e=D.map(t,function(e){if(!D.trim(D(e).html())||D(e).attr("data-type")||D(e).attr("data-product-type")||D(e).attr("data-product-sku")||D(e).attr("data-product-title"))return{productId:D(e).attr("data-id"),productType:D(e).attr("data-product-type"),productSKU:D(e).attr("data-product-sku"),productTitle:D(e).attr("data-product-title")}}))&&e.length){JSON.stringify(e);D.ajax({type:"POST",dataType:"json",contentType:"application/json",url:y+"/widget/badges",data:JSON.stringify({productIds:e,apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl}),success:function(i){t.each(function(e){var a=D(this).attr("data-id"),t=D(this).attr("data-type"),s=D.map(i,function(e,t){if(e.productId==a)return t})[0];0<=s&&(!t||"review"==t)?D(this).html(i[s].badge):0<=s&&"qna"==t&&D(this).html(i[s].badgeqna)})},error:function(e){}})}D(".stamped-product-reviews-badge[data-id].stamped-main-badge, .stamped-product-reviews-badge:first").length&&D(q).on("click",".stamped-product-reviews-badge[data-id].stamped-main-badge, .stamped-product-reviews-badge:first",function(){"qna"===D(this).attr("data-type")?(D("#stamped-questions-placeholder").length?de("#stamped-questions-placeholder"):(ee(null,"questions"),de("#stamped-main-widget")),!D(".stamped-badge-caption[data-questions]").length||"0"===D(".stamped-badge-caption[data-questions]").attr("data-questions")&&D(".new-question-form").show()):(ee(null,"reviews"),de("#stamped-main-widget"))})}()}function B(){if(0<D("#stamped-reviews-widget").length){var s=[],i=1;D("[id=stamped-reviews-widget]").each(function(e){var t=D(this);t.attr("data-element-id",i);var a=ae(t);s.push(a),i++}),e=s,t=y+"/widget/reviews/batch",D.ajax({type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({data:e}),url:t,success:function(e,t,a){for(var s=e.length,i=0;i<s;i++){var r=e[i].elementId;se(D('#stamped-reviews-widget[data-element-id="'+r+'"]'),e[i],e.translations)}}})}var e,t}function G(){var r=D(C).attr("data-limit-words")||D(".stamped-container",C).attr("data-widget-limit-words"),n=D(C).attr("data-keyword"),o=D(C).attr("data-search");(r&&0<r||n||o)&&D(".stamped-review",C).each(function(e){var t=D(".stamped-review-content-body:first",this);if(t.length){var a=D(t).html();if(a.indexOf("stamped-review-read-more")<=-1)if(n||o){var s;n&&(s=X(a,n)),o&&(s=X(a,o)),D(t).html(s)}else{var i=a.split(" ");i.length>r&&(txtTrimmed=i.slice(0,r).join(" ")+"...",D(t).html(txtTrimmed),D(t).append('<a class="stamped-review-read-more" style="margin-left:10px; cursor:pointer;">read more</span>'),D(t).append('<span class="original-review" style="display:none !important;">'+a+"</span>"))}}}),D(".stamped-review-reply .stamped-review-reply-body, .stamped-review-reply .stamped-review-content-body").each(function(){if(!D(this).attr("data-link-processed")){D(this).attr("data-link-processed",!0);var e=D(this).html();D(this).html(e.linkify())}})}function V(){var e=D(C).attr("data-keywords");if(e){D(".stamped-reviews-filter-label").show(),D(".stamped-summary-keywords").show(),D(C).removeAttr("data-keywords"),D(".stamped-summary-keywords-list",C).html("");var t="",a=e.split(",");for(i=0;i<a.length;i++)t+="<li>"+a[i]+"</li>";D(t).appendTo(D(".stamped-summary-keywords-list",C))}}e=void 0!==A?A:this,_=function(){function a(e){return e instanceof Date?e:isNaN(e)?/^\d+$/.test(e)?new Date(n(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e)):new Date(n(e))}function n(e){return parseInt(e)}function d(e,t,a){t=p[t]?t:p[a]?a:"en";for(var s=0,i=e<0?1:0,r=e=Math.abs(e);c[s]<=e&&s<6;s++)e/=c[s];return(0===(s*=2)?9:1)<(e=n(e))&&(s+=1),p[t](e,s,r)[i].replace("%s",e)}function l(e,t){return((t=t?a(t):new Date)-a(e))/1e3}function r(e,t){return e.getAttribute?e.getAttribute(t):e.attr?e.attr(t):void 0}function s(e,t){this.nowDate=e,this.defaultLocale=t||"en"}function e(e,t){return new s(e,t)}var i="second_minute_hour_day_week_month_month".split("_"),o="秒_分钟_小时_天_周_月_年".split("_"),p={en:function(e,t){if(0===t)return["just now","right now"];var a=i[parseInt(t/2)];return 1<e&&(a+="s"),[e+" "+a+" ago","in "+e+" "+a]},zh_CN:function(e,t){if(0===t)return["刚刚","片刻后"];var a=o[parseInt(t/2)];return[e+a+"前",e+a+"后"]}},c=[60,60,24,7,365/7/12,1],m="datetime",u="data-tid",h={};return s.prototype.doRender=function(e,t,a){var s,i,r,n=l(t,this.nowDate),o=this;e.innerHTML=d(n,a,this.defaultLocale),h[s=setTimeout(function(){o.doRender(e,t,a),delete h[s]},Math.min(1e3*function(e){for(var t=1,a=0,s=Math.abs(e);c[a]<=e&&a<6;a++)e/=c[a],t*=c[a];return s=(s%=t)?t-s:t,Math.ceil(s)}(n),2147483647))]=0,r=s,(i=e).setAttribute?i.setAttribute(u,r):i.attr&&i.attr(u,r)},s.prototype.formatDateString=function(e,t){return d(l(e,this.nowDate),t,this.defaultLocale)},s.prototype.render=function(e,t){void 0===e.length&&(e=[e]);for(var a=0,s=e.length;a<s;a++)this.doRender(e[a],(i=e[a]).dataset.timeagoStamped?i.dataset.timeagoStamped:r(i,m),t);var i},s.prototype.setLocale=function(e){this.defaultLocale=e},e.register=function(e,t){p[e]=t},e.cancel=function(e){var t;if(e)(t=r(e,u))&&(clearTimeout(t),delete h[t]);else{for(t in h)clearTimeout(t);h={}}},e},"object"==typeof module&&module.exports?(module.exports=_(),module.exports.default=module.exports):e.timeagoStamped=_();var H=0;function Q(){if(A.File&&A.FileReader&&A.FormData){var i=D("#stamped-file-uploader-input");i.on("change",function(e){for(var t=e.target.files,a=0;a<t.length;a++){var s=t[a];if(s)if(/^image\//i.test(s.type)){if(console.log("is image, begin upload"),3<=H)return void Z(q,"stamped:photo:maxed");r(s,++H)}else Z(q,"stamped:photo:invalid"),console.log("Not a valid image!")}i.val("")}),D(q).on("click",".stamped-file-photo-remove",function(){var e=D(this).attr("data-index");o.splice(e,1),D('.stamped-file-photo[data-index="'+e+'"]').remove()})}else console.log("File upload is not supported!");function r(t,a){var s=new FileReader;s.onloadend=function(){var n,o,d,e,l;console.log("process file"),n=s.result,o=t.type,d=t.name,e=a,(l=new Image).src=n,l.onload=function(e){var t=l.width,a=l.height;if(2500<t||2500<a){var s,i;a<t?(i=a*(2500/t),s=2500):(s=t*(2500/a),i=2500);var r=q.createElement("canvas");r.width=s,r.height=i,r.getContext("2d").drawImage(this,0,0,s,i),n=r.toDataURL(o),D(".stamped-file-holder").append('<div class="stamped-file-photo" data-index="'+e+'"><i class="fa fa-spin fa-spinner" /><img src="'+n+'" width="70" /><span style="display:none;">'+d+'</span><div class="stamped-file-photo-remove" data-index="'+e+'">x</div></div>'),p(n,e)}else D(".stamped-file-holder").append('<div class="stamped-file-photo" data-index="'+e+'"><i class="fa fa-spin fa-spinner" /><img src="'+n+'" width="70" /><span style="display:none;">'+d+'</span><div class="stamped-file-photo-remove" data-index="'+e+'">x</div></div>'),p(n,e)}(e),l.onerror=function(){console.log("There was an error processing your file!")}},s.onerror=function(){console.log("There was an error reading the file!")},s.readAsDataURL(t)}function p(e,t){var a=C.attr("data-product-id"),s={imagea:e.replace(/^data:image\/(png|jpg|jpeg|gif);base64,/,"")};Z(q,"stamped:photo:uploading"),D(".stamped-button-primary",C).attr("disabled","disabled"),D.ajax({type:"POST",url:"//stamped.io/api/widget/upload?"+D.param(ne({productId:a,apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl})),data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){setTimeout(function(){e&&(o.push(e),n(e,t))},1e3),setTimeout(function(){Z(q,"stamped:photo:uploaded"),D(".stamped-button-primary",C).removeAttr("disabled")},2e3)},error:function(e){o.length;'"max"'==e.responseText?alert("Upload up to 3 images"):console.log("An error occured, please try again later."),setTimeout(function(){Z(q,"stamped:photo:uploaded"),D(".stamped-button-primary",C).removeAttr("disabled")},2e3)}})}var n=function(e,t){fe("Photo upload complete idx"+t),D(".stamped-file-photo[data-index="+t+"] .fa").remove()}}function J(p,c,e,t){if(C.length&&!k){fe("Loading Main Widget...");var a=C.attr("data-product-id"),s=C.attr("data-product-ids"),i=C.attr("data-name"),r=C.attr("data-product-type"),n=C.attr("data-product-sku"),o=C.attr("data-user-reference"),d=C.attr("data-take-reviews"),l=C.attr("data-keyword"),m=C.attr("data-widget-language"),u=(C.attr("data-widget-type"),C.attr("data-load-type")||D(".stamped-container",C).attr("data-widget-load-type")),h=C.attr("data-search"),g=C.attr("data-cache")||null,f=D(".stamped-container",C).attr("data-widget-style"),v=A.mainWidgetMetafields||"";"slider"==f&&(u="continue"),i=i&&i.replace("!",""),!0===S&&console.log(richSnippet),c=c||(C.attr("data-sort")||D(".stamped-container",C).attr("data-widget-sort")),"continue"===u&&(t=!0),D("#stamped-main-widget-placeholder").length&&D("#stamped-main-widget-placeholder").append(C),k=!0,p&&!t&&de(".stamped-reviews"),C.addClass("stamped-main-widget-loading");var w=D.param(ne({productId:a,productIds:s,productName:i,productType:r,productSKU:n,userReference:o,page:p||1,apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,take:d||5,sort:c,rating:e,keyword:l,widgetLanguage:m,search:h,isUseCache:g}));D.isEmptyObject(x)||(w+="&"+D.param(x));var b={type:v.length?"POST":"GET",data:v.length?JSON.stringify({metafields:v}):null,dataType:"json",url:y+"/widget?"+w,success:function(e){fe("Loaded Main Widget..."),k=!1,C.removeClass("stamped-main-widget-loading");var t,a=e.product,s=e.widget,i=D("#stamped-main-widget .stamped-container").length;D(".question-form-wrapper").clone(),D(".stamped-questions").clone();if(i||C.empty().html(a),t="function"==typeof D.parseHTML?D.parseHTML(s):D(s),0==D(".stamped-content",C).children().length)D(".stamped-content",C).append(D(t));else{var r=D(".stamped-reviews",C),n=D('[class="stamped-review"]',t);("continue"!==u||1===p&&p)&&D('.stamped-reviews [class*="stamped-review"]',C).remove();var o=D(".stamped-pagination",t).attr("data-page",p),d=D(".stamped-reviews .stamped-pagination",C);d.length?D(n).insertBefore(d):D(n).appendTo(".stamped-reviews",C);var l=D(".stamped-tabs",t);D(".stamped-tabs",C).replaceWith(l),o.length?d.length?d.replaceWith(o):r.append(o):d.remove()}c&&D(".stamped-sort-select",C).length&&"none"!==D('.stamped-sort-select option[value="'+c+'"]',C).css("display")&&(D(".stamped-sort-select",C).val(c),D(".stamped-container",C).attr("data-widget-sort",c)),D(".new-review-form").hide(),D(".new-question-form").hide(),Z(q,"stamped:reviews:loaded")},error:function(e){}};v.length&&(b.contentType="application/json"),D.ajax(b)}}function X(e,t){return e=e.replace(new RegExp(t+"(?!([^<]+)?<)","gi"),'<span class="stamped-keyword-highlight">$&</span>')}function Z(e,t,a){var s;A.CustomEvent?s=new CustomEvent(t,a):(s=q.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,a);try{e.dispatchEvent(s)}catch(e){}}function Y(l,e){if((C=D("#stamped-main-widget")).length){e=C.attr("data-product-id");var t=C.attr("data-product-sku"),a=C.attr("data-product-type"),s=C.attr("data-name"),p=C.attr("data-take-questions")||5;if(!e)return;fe("Loading Q&A"),D.ajax({type:"GET",url:y+"/widget/questions",data:{productId:e,productSKU:t,productType:a,productTitle:s,page:l||1,apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,take:p||5},success:function(e){if(1==e.a&&D(".stamped-questions").length){var t,a,s,i;t=e.result,a=e.t,s=e.form,e.p,i=e.avatar;D("#tab-questions").text();D("#tab-questions").attr("data-count",a),function(e){if(D(".stamped-questions").length&&!D(".question-form-wrapper").length){var t=D('<div class="question-form-wrapper">').html(e);D(".new-review-form").before(t)}}(s);var r=D('<div class="stamped-questions">');if(D(".stamped-questions").html(""),r.append(t),i){var n=D(".stamped-review #stamped-review-avatar",r),o=D('<img src="'+i+'" width="100">');n.html(o)}var d=D(".stamped-questions-placeholder");d.length?(D(".stamped-questions",d).html(""),D(".stamped-questions",d).replaceWith(r),D(".stamped-questions",d).length||(D(".stamped-questions").appendTo(d),D(".stamped-questions").replaceWith(r)),D(".stamped-questions",d).show(),D("#tab-questions").hide(),D(".question-form-wrapper").prependTo(d),D(".stamped-summary-actions-newquestion").prependTo(d)):(D(".stamped-questions").replaceWith(r),l?D(".stamped-questions").show():D(".stamped-questions").hide()),function(e,t,a){var s=0<e?e/a<1?1:Math.ceil(e/a):1;if(1==s)return;var i='<div class="stamped-pagination" id="stamped-pagination-question"><div><span id="stamped-pagination-prev" class="previous"><a onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+(t-1)+'"><</a></span><span id="pages"></span><span id="stamped-pagination-next" class="next"><a onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+(t+1)+'">></a></span></div></div>',r=D(".stamped-questions"),n=D(".stamped-questions-placeholder");n.length&&(r=D(".stamped-questions",n));var o=D(".stamped-pagination",r);o.length?o.replaceWith(i):r.append(i);o=D(".stamped-pagination",r);e=s,t=t;var d=[];if(d.push(1),e<=7){for(p=2;p<e;p++)d.push(p);e==t&&d.push(t)}if(8<=e){1<=t-2&&(t-2!=1&&d.push(t-2),d.push(t-1)),1!=t&&d.push(t);var l=t+2;l<=e&&(d.push(t+1),l!=e&&d.push(t+2))}1==t||1==t?D("#stamped-pagination-prev",o).hide():D("#stamped-pagination-prev",o).show();e==t||1==e?D("#stamped-pagination-next",o).hide():D("#stamped-pagination-next",o).show();e!=t&&d.push(e);for(var p=0;p<d.length;p++){d[p]==t?D("#pages",o).append(' <span class="page active"><a style="cursor:pointer;" onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+d[p]+'">'+d[p]+"</a></span> "):D("#pages",o).append(' <span class="page"><a style="cursor:pointer;" onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+d[p]+'">'+d[p]+"</a></span> ")}}(a,l||1,p),d.length?l&&de(".stamped-questions-placeholder"):l&&de("#stamped-main-widget"),D(".stamped-review-reply-body",r).each(function(){var e=D(this).html();D(this).html(e.linkify())}),Z(q,"stamped:questions:loaded")}}})}}function ee(e,t){D("#stamped-questions-placeholder").length||(D(".stamped-tabs #tab-reviews").removeClass("active"),D(".stamped-tabs #tab-questions").removeClass("active"),"questions"==t?D(".stamped-tabs #tab-questions").addClass("active"):"reviews"==t&&D(".stamped-tabs #tab-reviews").addClass("active"),e&&(D(e).addClass("active"),t=D(e).data("type")),"reviews"==t?(D(".stamped-reviews").show(),D(".stamped-reviews-filter").show(),D(".stamped-questions").hide(),D("#stamped-sort-select").show()):"questions"==t&&(D(".stamped-reviews").hide(),D(".stamped-reviews-filter").hide(),D(".stamped-questions").show(),D("#stamped-sort-select").hide()),D(".new-review-form").hide(),D(".new-question-form").hide())}var te=[];function ae(e,t){var a=D(e),s=a.attr("data-element-id"),i=a.attr("data-widget-type"),r=(a.data("widget-persist-data"),a.data("review-id")),n=a.data("review-ids")?a.data("review-ids").toString().split(","):null,o=a.data("product-id"),d=a.data("product-ids")?a.data("product-ids").toString().split(","):null,l=a.data("product-category")||a.data("product-type"),p=a.data("product-brand"),c=a.data("product-sku"),m=a.data("limit-words"),u=a.data("random"),h=a.data("show-avatar"),g=a.data("take"),f=a.data("fill-empty"),v=a.attr("data-min-rating"),w=a.attr("data-min-length"),b=a.attr("data-rating"),y=a.attr("data-tags"),k=a.attr("data-tags-exclude"),S=a.data("with-photos"),x=a.data("sort-reviews"),C=a.data("widget-data"),_=a.data("widget-language"),T=a.data("instagram-gallery-id");return{type:i,reviewId:r,reviewIds:n,productId:o,productIds:d,productCategory:l,productBrand:p,productSKU:c,limitWords:m,random:u,showAvatar:h,isFillEmpty:f,apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,page:t,skip:g,minRating:v,minLength:w,rating:b,isWithPhotos:S,sortReviews:x,instagramGalleryId:T,dataType:C,widgetLanguage:_,tags:y,tagsExclude:k,elementId:s}}function se(e,t){if(t){var a=t.template,s=t.lang,i=e.attr("data-widget-type"),r=e.data("widget-persist-data")||!1;if(D(e).attr("data-lang",s||"en"),"instagram-feed"!=i&&"visual-gallery"!=i&&1!=r&&D(e).html(""),"single"==i)e.append(a),StampedWidgetSingleFn,StampedWidgetSingleFn.init(t.data,e,D);else if("full-page"==i||"full-page-nps"==i){var n=e.attr("data-rich-snippet"),o="/"==location.pathname;if(0<t.total&&"true"==n&&!o){var d={"@context":"http://schema.org","@type":"Product",name:t.shop,aggregateRating:{"@type":"AggregateRating",ratingValue:t.rating,reviewCount:t.total}};(l=q.createElement("script")).type="application/ld+json",l.innerHTML=JSON.stringify(d),q.getElementsByTagName("head")[0].appendChild(l)}e.append(a),StampedWidgetFullPageFn,StampedWidgetFullPageFn.init(t,e,D)}else if("full-page-multiple"==i)e.append(a),StampedWidgetFullPageMultipleFn,StampedWidgetFullPageMultipleFn.init(t,e,D);else if("reviews-highlight"==i)e.append(a),StampedWidgetReviewsHighlightFn,StampedWidgetReviewsHighlightFn.init(t,e,D);else if("people-highlight"==i)e.append(a),StampedWidgetPeopleHighlightFn,StampedWidgetPeopleHighlightFn.init(t,e,D);else if("drawer"==i)e.append(a),StampedWidgetDrawerFn,StampedWidgetDrawerFn.init(t,e,D);else if("carousel"==i)e.append(a),StampedCarouselFn,StampedCarouselFn.init(t,e,D);else if("carousel-nps"==i)e.append(a),StampedCarouselNPSFn,StampedCarouselNPSFn.init(t,e,D);else if("carousel-photos"==i)e.append(a),StampedCarouselPhotosFn,StampedCarouselPhotosFn.init(t.data,e,D);else if("site-badge"==i){n=e.attr("data-rich-snippet"),o="/"==location.pathname;if(0<t.total&&"true"==n&&!o){var l;d={"@context":"http://schema.org","@type":"Product",name:t.shop,aggregateRating:{"@type":"AggregateRating",ratingValue:t.rating,reviewCount:t.total}};(l=q.createElement("script")).type="application/ld+json",l.innerHTML=JSON.stringify(d),q.getElementsByTagName("head")[0].appendChild(l)}e.append(a),StampedSiteBadgeFn,StampedSiteBadgeFn.init(t,e,D)}else"top-rated"==i?(e.append(a),StampedTopRatedFn,StampedTopRatedFn.init(t,e,D)):"wall-photos"==i?(e.append(a),StampedWallPhotosFn,StampedWallPhotosFn.init(t,e,D)):"checkout-comments"==i?(e.append(a),StampedCheckoutCommentsFn,StampedCheckoutCommentsFn.init(t,e,D)):"instagram-feed"==i?(A.stampedInstagramDataArr&&!D(e).is(":empty")||e.append(a),StampedInstagramFeedFn,StampedInstagramFeedFn.init(t,e,D)):"visual-gallery"==i?(A.stampedVisualGalleryDataArr||e.append(a),StampedVisualGalleryFeedFn,StampedVisualGalleryFeedFn.init(t,e,D)):"facebook-messenger-optin"==i?(StampedFacebookMessengerOptinFn,StampedFacebookMessengerOptinFn.init(t,e,D)):"widget-development"==i&&(StampedWidgetDevFn,StampedWidgetDevFn.init(t,e,D));Z(q,"stamped:reviews:widget:loaded")}}function ie(e,t,a){if(a){var s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3);var i="; expires="+s.toGMTString()}else i="";q.cookie=e+"="+t+i+"; path=/"}function re(e){for(var t=e+"=",a=q.cookie.split(";"),s=0;s<a.length;s++){for(var i=a[s];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function ne(e){for(var t in e)null!==e[t]&&""!==e[t]&&void 0!==e[t]||delete e[t];return e}function oe(e,t){for(var a=[],s=0;s<t;)a[s++]=e;return a.join("")}function de(e){if(D(e).length){var t=D("#stamped-main-widget").attr("data-animation");if("false"!==t){var a=D(e),s=D("html, body"),i=D("#stamped-main-widget").attr("data-offset")||1;A.stampedMobileCheck()&&(i=D("#stamped-main-widget").attr("data-offset-mobile")||1),s.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){s.stop()}),s.animate({scrollTop:a.offset().top-i},t||1e3,function(){s.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove")})}}}function le(e,t,a){D||jQuery&&(D=jQuery),a&&D(a).closest("#stamped-main-widget").length&&(C=D(a).closest("#stamped-main-widget"));C.attr("data-product-id");var s,i=D(".stamped-summary-ratings.selected .summary-rating-bar.selected",C).attr("data-rating");i&&(t=i),D(".stamped-sort-select",C).length&&(s=D(".stamped-sort-select",C).val()),J(e,s,t)}function pe(){var e;D("select.stamped-filter-select").each(function(){D(this).val("")}),D(".stamped-summary-keywords-list li").removeClass("selected"),D(C).removeAttr("data-keyword"),D(".stamped-summary-actions-clear").hide(),D(".stamped-reviews",C).removeAttr("data-filtered"),D(".stamped-sort-select").length&&(e=D(".stamped-sort-select").val()),x={},D(".stamped-reviews-search-input").val(""),D(".stamped-reviews-search-clear").hide(),D(C).removeAttr("data-search"),J(1,e,null,!0)}String.linkify||(String.prototype.linkify=function(){return this.replace(/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,'<a href="$&">$&</a>').replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a href="http://$2">$2</a>').replace(/[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,6})+/gim,'<a href="mailto:$&">$&</a>')});var ce=[],me=!1,ue=null,he=null;function ge(e,t){t=t||A.location.href,e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function fe(e,t){var a="true"==ge("stamped_debug")||1==A.stamped_debug,s=A.stamped_debug_level||ge("stamped_debug_level");a&&(t||console.log("[Stamped.io]",e),t&&s&&console.log("[Stamped.io level"+s+"]",e))}function ve(e,t){(s=q.createElement("script")).type="text/javascript",s.charset="UTF-8",s.src=e;var a=q.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a),s.onload=s.onreadystatechange=t}function we(e){if(1==A.isInitializedStamped)return fe("Already initalized"),StampedFn.loadWidget(!0),void StampedFn.loadDisplayWidgets();if(A.isInitializedStamped=!0,e&&(fe(e),A.globalOptionsStamped=e),A.globalOptionsStamped&&A.globalOptionsStamped.apiKey){var t="true"==ge("stamped_force_jquery");"undefined"==typeof jQuery||1==t?ve("https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js",function(){D=jQuery.noConflict(!0),I(),A.isInitializedStamped=!0}):(I(0,jQuery),A.isInitializedStamped=!0)}}var be=q.getElementById("stamped-script-widget"),ye="";be&&(ye=be.src);var ke,Se=!1;if((0<ye.indexOf("skipCss=true")||1==A.stamped_exclude_main_css)&&(Se=!0),Se||function(e){for(var t=q.styleSheets,a=0,s=t.length;a<s;a++)if(t[a]&&t[a].href&&-1<t[a].href.indexOf(e))return;var i=q.createElement("link");i.rel="stylesheet",i.href=e,i.type="text/css";var r=q.getElementsByTagName("link")[0];if(r)r.parentNode.insertBefore(i,r);else{var n=q.getElementsByTagName("head")[0];i.setAttribute("async",""),n.appendChild(i)}}("//cdn1.stamped.io/files/widget.min.css"),"undefined"!=typeof Shopify){var xe=!1;if(Shopify.shop){if(null!=be){-1<ye.indexOf("skip=true")&&(xe=!0),-1<ye.indexOf("debug=true")&&(S=!0);var Ce=be.getAttribute("data-api-key");!Ce&&-1<ye.indexOf("apiKey")&&(Ce=ge("apiKey",ye)),Ce&&(xe=!0,we({apiKey:Ce,storeUrl:Shopify.shop}))}xe||((ke=new XMLHttpRequest).onreadystatechange=function(){if(4===ke.readyState&&200===ke.status){var e=JSON.parse(ke.responseText);e&&(!0===e.skip||(appKey=e.apiKey,we({apiKey:appKey,storeUrl:Shopify.shop})))}},ke.open("GET","//stamped.io/api/shopify/getappkey?shopShopifyDomain="+Shopify.shop,!0),ke.send())}}return{init:we,reloadUGC:U,toggleForm:function(e){if("review"==e){ee(null,"reviews");var t=D(".new-review-form");(a=D(".new-question-form")).slideUp(),a.removeClass("stamped-visible"),t.hasClass("stamped-visible")?(t.slideUp(),t.removeClass("stamped-visible")):(t.slideDown(),t.addClass("stamped-visible"))}else if("question"==e){ee(null,"questions");var a;t=D(".new-question-form");(a=D(".new-review-form")).slideUp(),a.removeClass("stamped-visible"),t.hasClass("stamped-visible")?(t.slideUp(),t.removeClass("stamped-visible")):(t.slideDown(),t.addClass("stamped-visible"))}},setRating:function(e){var t,a,s,i,r;t=D(e).parents(".new-review-form"),s=D(e).attr("data-value"),a=D(e).parent(),t.find("input[name='reviewRating']").val(s),i=s,(r=a).find("a:lt("+i+")").removeClass("fa-star-o").addClass("fa-star-checked"),r.find("a:gt("+(i-1)+")").removeClass("fa-star-checked").addClass("fa-star-o")},submitForm:function(e){var l,t,a=C.data("label-submitting"),p=D(".new-review-form .stamped-button-primary",C).val();if((t=function(e){var t={};D(e).hasClass("new-review-form")||(e=D(e).parents(".new-review-form"));var a=D("input,textarea,select,radio",e).serializeArray();return D.each(a,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}(e)).reviewRating&&t.author){var c={productName:C.attr("data-name"),productId:C.attr("data-product-id"),productSKU:C.attr("data-product-sku"),productDescription:C.attr("data-description"),productImageUrl:C.attr("data-image-url"),productUrl:C.attr("data-url"),reviewSource:"widget",userReference:C.attr("data-userReference")};t=D.extend(t,c),l=t,t=(t=D.param(t)).replace(/%0D%0A/g,"%0A"),D.ajax({url:y+"/reviews2?"+D.param(ne({apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,photos:o.join()})),type:"POST",data:t,beforeSend:function(e){D("#stamped-button-submit",C).attr("disabled","disabled"),a&&D("#stamped-button-submit",C).val(a)},error:function(e){Z(q,"stamped:reviews:submitError"),D("#stamped-button-submit",C).removeAttr("disabled"),p&&D("#stamped-button-submit",C).val(p)},success:function(e){var t,a,s,i,r,n,o,d;D("#stamped-main-widget").length&&(a=oe("★",(t=l).reviewRating),s=C.attr("data-image-url")||"",i="https://stamped.io/facebookpost?caption="+a+" "+encodeURIComponent(t.reviewTitle)+"&name="+a+" "+encodeURIComponent(t.reviewTitle)+"&description="+encodeURIComponent(t.reviewMessage)+"&link="+encodeURIComponent(t.productUrl)+"&picture="+encodeURIComponent(s.replace("%3F","?")),r="https://www.facebook.com/dialog/feed?app_id=222664514734026&display=popup&link="+encodeURIComponent(i)+"&name="+encodeURIComponent(t.reviewTitle)+"&redirect_uri=https://stamped.io/shares?productId="+t.productId,n="https://twitter.com/intent/tweet?text="+a+" "+t.reviewMessage.substr(0,140)+"&url="+encodeURIComponent(t.productUrl),o="https://plus.google.com/share?url="+encodeURIComponent(t.productUrl),d=D(".stamped-thank-you .stamped-share-links"),D(".facebook",d).attr("href",r),D(".twitter",d).attr("href",n),D(".google",d).attr("href",o),D(".stamped-user-review",C).hide(),D(".stamped-thank-you",C).show(),e.reviewRating<3?(D(".stamped-thank-you p",C).hide(),D(".stamped-thank-you .stamped-share-links",C).hide()):(D(".stamped-thank-you p",C).show(),D(".stamped-thank-you .stamped-share-links",C).show()),D(".new-review-form",C).hide(),D(".edit-review-form",C).hide(),D(".stamped-summary-actions-newreview").hide(),D("#stamped-button-submit",C).removeAttr("disabled"),p&&D("#stamped-button-submit",C).val(p),de("#stamped-main-widget"),function(e,t,a){if(null!=re("stamped-user-reviews")){for(var s=JSON.parse(re("stamped-user-reviews")),i=!1,r=0;r<s.length;r++)if(s[r].pid==e){i=!0,s[r];break}!i&&e&&t&&1==a&&(10<=s.length&&s.splice(0,1),s.push({pid:e,v:t}),ie("stamped-user-reviews",JSON.stringify(s),1))}else if(e&&t&&1==a){var n=[{pid:e,v:t}];ie("stamped-user-reviews",JSON.stringify(n),1)}}(c.productId,e.userReference,!0)),Z(q,"stamped:reviews:submitted")}})}},submitQuestionForm:function(){var t=D("#new-question-form"),e=D("#stamped-main-widget");if(t.length&&e.length){var a=e.data("name"),s=e.data("description"),i=e.data("product-sku"),r=e.data("url"),n=e.data("image-url"),o=t.serializeArray();o.push({name:"productName",value:a}),o.push({name:"productDescription",value:s}),o.push({name:"productSKU",value:i}),o.push({name:"productUrl",value:r}),o.push({name:"productImageUrl",value:n}),o.push({name:"apiKey",value:A.globalOptionsStamped.apiKey}),o.push({name:"sId",value:A.globalOptionsStamped.sId}),o.push({name:"storeUrl",value:A.globalOptionsStamped.storeUrl}),D('input[type="submit"]',t).attr("disabled","disabled"),D.ajax({type:"POST",url:"//stamped.io/api/questions",data:D.param(o),crossDomain:!0,success:function(e){e.a&&(D("#new-question-form").hide(),D(".stamped-form-message-success").show(),D("#new-question-form")[0].reset(),D('input[type="submit"]',t).removeAttr("disabled"))}})}},toggleFormEdit:function(){D(".edit-review-form",C).toggle()},pageQuestions:function(e){var t=C.attr("data-product-id");Y(D(e).data("page"),t)},pageReviews:le,sortReviews:function(e){C.attr("data-product-id"),e.value&&J(1,e.value,null,!0)},filterReviews:function(){x={};var e,a=1;D("select.stamped-filter-select").each(function(){var e=D("option:first-child",this).text(),t=this.value;x["qt"+a]=e,x["qv"+a]=t,a++}),D(".stamped-summary-actions-clear").show(),D(".stamped-reviews",C).attr("data-filtered","true"),D(".stamped-sort-select").length&&(e=D(".stamped-sort-select").val()),J(1,e,null,!0)},filterClear:pe,pageWidget:function(e){var s,t,a,i=D(e).data("page"),r=D(e).closest("#stamped-reviews-widget");r.attr("data-page",i),t=y+"/widget/reviews",a=ae(s=r,i),D.ajax({type:"GET",url:t+"?"+D.param(ne(a)),dataType:"json",success:function(e,t,a){se(s,e)}})},loadBadges:P,loadWidget:W,loadDisplayWidgets:B,voteReview:function(e,t,a){var s=D(e);s.parent().fadeTo("slow",.3),s.addClass("disable-link"),D.ajax({type:"POST",url:y+"/reviews/vote",data:{reviewId:t,vote:a,apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl},success:function(e){if(1===e||-1===e){var t=s.attr("data-count"),a=parseInt(t);s.attr("data-count",a+e)}s.parent().fadeTo("slow",1),s.removeClass("disable-link")}})},openUGCModal:function(_,e,t,a,s,T,I,O){var U,F;1!==a&&a||(_=function(e,t){var a=[];for(i=0;i<e.length;i++){var s=e[i];if(1!=t||s.reviewUserPhotos){var r={photos:[],videos:[],name:s.author,via:"Photos",title:s.reviewTitle,body:s.reviewMessage,date:s.reviewDate,reply:s.reviewReply,dateReplied:s.dateReplied,dateFull:s.dateCreated,verifiedType:s.reviewVerifiedType,rating:s.reviewRating,products:[{url:s.productUrl,title:s.productName,imageUrl:s.productImageLargeUrl,imageLargeUrl:s.productImageLargeUrl}],review_id:s.id,votes:{up:s.reviewVotesUp,down:s.reviewVotesDown},options:[]};if(s.reviewUserPhotos||s.reviewUserVideos){if(s.reviewUserVideos){var n=s.reviewUserVideos.split(",");for(ii=0;ii<n.length;ii++){var o="//cdn.stamped.io/uploads/videos/"+n[ii],d="//cdn.stamped.io/uploads/videos/"+n[ii]+".jpg";o.indexOf(".mp4")<0&&(o+=".mp4"),0<=o.indexOf("nothumb")&&(d=""),r.photos.push({videoUrl:o,imageThumbnailUrl:d})}}if(s.reviewUserPhotos){var l=s.reviewUserPhotos.split(",");for(ii=0;ii<l.length;ii++)r.photos.push({imageUrl:"//cdn.stamped.io/uploads/photos/"+l[ii],imageThumbnailUrl:"//cdn.stamped.io/uploads/photos/thumb/"+l[ii]})}}else r.photos.push({imageUrl:s.productImageLargeUrl,imageThumbnailUrl:s.productImageUrl});if(s.reviewOptionsList&&s.reviewOptionsList.length)for(ii=0;ii<s.reviewOptionsList.length;ii++)r.options.push({message:s.reviewOptionsList[ii].message,value:s.reviewOptionsList[ii].value});a.push(r)}}return a}(_,s)),null!=_||_.length||h(e,T);var r,n='<div class="stamped-ugc-modal" data-lang="'+(I=I||"en")+'"> <div class="stamped-ugc-modal-wrapper"><a href="javascript:void(0)" title="Close" aria-label="Close" role="button" class="stamped-modal-close show-mobile" style="display:none;">X</a> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-previous" data-direction="left" tabindex="0" aria-label="Previous Photo"> <i class="stamped-fa stamped-fa-angle-left"></i> </div> <div class="stamped-ugc-modal-image-wrapper"> <div class="stamped-ugc-modal-image"></div> <ul></ul> </div> <div class="stamped-ugc-modal-content"> <a href="javascript:void(0)" title="Close" aria-label="Close" role="button" class="stamped-modal-close">X</a> <div class="stamped-ugc-modal-content-wrapper"> <div class="stamped-ugc-modal-user"> <div class="stamped-ugc-modal-user-source"></div><div class="stamped-ugc-modal-user-username"></div> </div> <div class="stamped-ugc-modal-caption"></div><div class="stamped-ugc-modal-votes"></div> <div class="stamped-ugc-modal-tags"> <a aria-label="Link to Product" {0}> <div class="stamped-ugc-modal-tags-product-image-wrapper"><img {1} class="stamped-ugc-modal-tags-product-image" onerror=\'this.style.display = "none"\' alt="Product Image" /></div> <div class="stamped-ugc-modal-tags-product-title">{2}</div> <div class="stamped-ugc-modal-tags-btn"></div> </a> </div> </div> </div> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-next" data-direction="right" tabindex="0" aria-label="Next Photo"> <i class="stamped-fa stamped-fa-angle-right"></i> </div> <div class="stamped-ugc-modal-list-photos"><ul></ul></div> </div> </div>',j=(D(t).attr("data-hover-text"),D(t).attr("data-shop-button-text"),D(t).attr("data-url-param")||""),R=D(t).attr("data-url-store")||A.stamped_global_url_store||"";D(t).attr("data-cropped"),D(t).attr("data-page"),D(t).attr("data-take"),D("#stamped-ugc-modal").length||((U=D(n)).attr("data-modal-type",a),D(U).appendTo(q.body));var o="",d=_.length;F=F||D(".stamped-ugc-modal-tags:first",U).html();for(var l=_?_.length:0,E=0;E<d;E++){var p=_[E],c=p.imageUrl;c&&(o+=templateBlock.formatStringStamped(l,c),l++),p.photos.length&&p.photos[0].imageUrl&&(te[E]=new Image,te[E].src=p.photos[0].imageUrl)}if(D(".stamped-ugc-media-block-template",t).append(o),D(t).keydown(function(e){if(37===e.keyCode)g("left");else{if(39!==e.keyCode)return;g("right")}}),!r){D(q).on("click keypress",".stamped-modal-close, .stamped-ugc-modal.open",function(e){if(!0===z(e)){if(e.target!=this)return;U.remove(),D("body").removeClass("stamped-modal-open")}}),U.on("click keypress",".stamped-ugc-modal-nav-previous, .stamped-ugc-modal-nav-next",function(e){if(!0===z(e)){var t=D(this).attr("data-direction");g(t)}});q.addEventListener("touchstart",function(e){m=e.touches[0].clientX,u=e.touches[0].clientY},!1),q.addEventListener("touchmove",function(e){if(!m||!u)return;var t=e.touches[0].clientX,a=e.touches[0].clientY,s=m-t,i=u-a;Math.abs(s)>Math.abs(i)&&g(0<s?"right":"left");u=m=null},!1);var m=null,u=null}function $(){var e=Number(D(this).text())+1,t=D(this).data("image-url");D(".stamped-ugc-modal-image-wrapper ul li").removeClass("active"),D(".stamped-ugc-modal-image-wrapper ul li:nth-child("+e+")").addClass("active"),!0!==A.stamped_modal_ugc_type_background?D(".stamped-ugc-modal-image",U).append('<img src="'+t+'" alt="Customer Photo" />'):D(".stamped-ugc-modal-image",U).css("background-image","url("+t+")"),Z(q,"stamped:ugcmodal:paged")}function L(){var e=D(this).data("index-review"),t=D(this).data("index-photo");D(".stamped-ugc-modal-list-photos ul li").removeClass("active"),D(".stamped-ugc-modal-list-photos ul li[data-index-review="+e+"][data-index-photo="+t+"]").addClass("active"),h(e,t),Z(q,"stamped:ugcmodal:paged")}r=!0;var h=function(e,t){var a=_[e];if(null!=a&&null!=a.photos){if(null!==t?(T=t)>a.photos.length-1&&(T=0):T?T>a.photos.length-1&&(T=0):T=0,!D(".stamped-ugc-modal-list-photos ul li",U).length)for(var s=0;s<_.length;s++)for(var i=0;i<_[s].photos.length;i++){var r=e==s&&t==i?"active":"",n=(_[s].photos[i].imageUrl,_[s].photos[i].imageThumbnailUrl),o=q.createElement("li");o.className=r,o.innerHTML="";var d=q.createAttribute("data-index-review");d.value=s,o.setAttributeNode(d),(c=q.createAttribute("data-index-photo")).value=i,o.setAttributeNode(c),o.style.background="url("+n+")",D(".stamped-ugc-modal-list-photos ul",U).append(o),o.onclick=L}if(null!=a.photos[T]){var l=a.photos[T].imageUrl,p=a.photos[T].videoUrl;l?!0!==A.stamped_modal_ugc_type_background?D(".stamped-ugc-modal-image",U).html('<img src="'+l+'" alt="Customer Photo" />'):D(".stamped-ugc-modal-image",U).css("background-image","url("+l+")"):p&&D(".stamped-ugc-modal-image",U).fadeOut("",function(){D(".stamped-ugc-modal-image",U).css("background-image",'url("")'),D(".stamped-ugc-modal-image",U).html('<video class="stamped-ugc-modal-video" src="'+p+'" width="100%" controls autoplay style="width: 100%; height: 100%;max-height: 600px; position: absolute;" />'),D(this).fadeIn()})}for(D(".stamped-ugc-modal-image-wrapper ul",U).html(""),ii=0;ii<a.photos.length;ii++){var c,m=ii===T?"active":"",u=q.createElement("li");u.className=m,u.innerHTML=ii,(c=q.createAttribute("data-image-url")).value=a.photos[ii].imageUrl,u.setAttributeNode(c),D(".stamped-ugc-modal-image-wrapper ul",U).append(u),u.onclick=$}D(".stamped-ugc-modal-user-source").text(a.via),D(".stamped-ugc-modal-user-username",U).text(a.name);var h="Verified Buyer",g="Shop Now";O&&"en"!=I&&(h=O.label_verified_buyer||h,g=O.label_shop_now||g),D(".stamped-ugc-modal-user-username",U).append('<span class="stamped-verified-badge">'+h+"</span>"),D(".stamped-ugc-modal-tags-btn",U).append("<span>"+g+"</span>");var f="";if(a.rating){for(var v=0;v<a.rating;v++)f+='<i class="stamped-fa stamped-fa-star"></i>';for(v=0;v<5-a.rating;v++)f+='<i class="stamped-fa stamped-fa-star-o"></i>'}var w,b="";if(a.options&&a.options.length){for(b+='<ul class="">',E=0;E<a.options.length;E++){var y=a.options[E].message,k=a.options[E].value;b+='<li data-value="'+y.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")+'"><span class="stamped-ugc-modal-options-message">'+y+'</span> <span class="stamped-ugc-modal-options-value">'+k+"</span></li>"}b+="</ul>"}a.reply||(a.reply=""),w=a.dateFull?new Date(a.dateFull):new Date(a.date);var S=(new timeagoStamped).formatDateString(w);for("en"!=I&&(S=a.date),D(".stamped-ugc-modal-caption",U).html('<div class="stamped-ugc-modal-date" data-date="'+a.date+'">'+S+'</div><div class="stamped-ugc-modal-caption-rating">'+f+'</div><div class="stamped-ugc-modal-caption-options">'+b+'</div><div class="stamped-ugc-modal-caption-title">'+(a.title||"")+'</div> <div class="stamped-ugc-modal-caption-body">'+a.body+'</div> <div class="stamped-ugc-modal-caption-reply">'+a.reply+"</div>"),D(".stamped-ugc-modal-votes",U).html('<span class="stamped-ugc-modal-vote-up" data-count="'+a.votes.up+'" onclick="StampedFn.voteReview(this, '+a.review_id+',1)"><i class="stamped-fa stamped-fa-thumbs-up"></i></span><span class="stamped-ugc-modal-vote-down" data-count="'+a.votes.down+'" onclick="StampedFn.voteReview(this, '+a.review_id+',1)"><i class="stamped-fa stamped-fa-thumbs-down"></i></span>'),D(".stamped-ugc-modal-tags",U).html(""),E=0;E<a.products.length;E++){var x=a.products[E];x.title=x.title?x.title:"",R?(x.url=x.url.replace("?storeUrl=https://",""),x.url=x.url+"?storeUrl="+R):j&&(x.url=x.url+"?param="+j);var C=x.imageUrl||x.imageLargeUrl;x.imageUrl?D(".stamped-ugc-modal-tags",U).append(F.formatStringStamped('href="'+x.url+'"','src="'+C+'"',x.title)):D(".stamped-ugc-modal-tags",U).append(F.formatStringStamped('href="'+x.url+'"',"",x.title))}U.hasClass("open")||(U.addClass("open"),D("body").addClass("stamped-modal-open"),Z(q,"stamped:ugcmodal:open")),U.attr("data-review-index",e),U.attr("data-photo-index",T)}},g=function(e){if(U.hasClass("open")){U.attr("data-review-index"),U.attr("data-photo-index");if("left"==e)D(".stamped-ugc-modal-list-photos ul li.active").prev().click();else{if("right"!=e)return;var t=D(".stamped-ugc-modal-list-photos ul li.active").next();D(t.click()),t.length||Z(q,"stamped:ugcmodal:last")}}};null!=_&&_.length&&h(e,T)},openUGCPhoto:function(r,n,o,e){if(ce.length<=0&&!me||ue!=n){me=!0;var t=y+"/widget/reviews",a=D(C).attr("data-product-sku")||"",s="",i="";!0===e&&(n=D(C).attr("data-product-id")||"",s=D(C).attr("data-name")||"",i=D(C).attr("data-product-type")||""),D.ajax({type:"GET",url:t+"?"+D.param(ne({type:"widget-carousel-photos",productId:n,productSKU:a,productType:i,productTitle:s,random:!1,isFillEmpty:!1,apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,page:1,skip:100,minRating:1,isWithPhotos:!0})),dataType:"json",success:function(e,t,a){ce=e.data;for(var s=null,i=0;i<ce.length;i++)ce[i].id==r&&(s=i);null!=s&&(he=e.lang,StampedFn.openUGCModal(ce,s,D("#stamped-main-widget"),null,null,o,he,e.translations)),me=!1,ue=n}})}else{for(var d=null,l=0;l<ce.length;l++)ce[l].id==r&&(d=l);null!=d&&StampedFn.openUGCModal(ce,d,D("#stamped-main-widget"),null,null,o,he),me=!1}return!1},initOptions:A.globalOptionsStamped,loadSurveyOptin:function(e){var t,a=setInterval(function(){void 0!==A.globalOptionsStamped&&(null!==e&&e.orderId&&D.ajax({type:"GET",url:"//stamped.io/api/plugin/facebookmessenger?"+D.param(ne({apiKey:A.globalOptionsStamped.apiKey,sId:A.globalOptionsStamped.sId,storeUrl:A.globalOptionsStamped.storeUrl,orderId:e.orderId,customerEmail:e.customerEmail})),success:function(e){D("body").append(e.html);var t=D("#stamped-facebook-optin .fb-send-to-messenger")[0].outerHTML,a=q.createElement("iframe");a.height="100",a.width="100%";var s="<!DOCTYPE html> <html> <head> <meta charset='utf-8' /> <title></title> </head> <script> var fbPageId, fbUserRef; window.fbAsyncInit = function() { FB.init({ appId : '222664514734026', xfbml : true, version : 'v3.1' }); FB.Event.subscribe('send_to_messenger', function(e) { var modal = window.top.document.getElementById('stamped-facebook-optin'); if (e.event == 'rendered'){ modal.style.display = 'block'; } if (e.event == 'opt_in'){ console.log('hide'); modal.style.display = 'none'; } }); }; (function(d, s, id){ var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) {return;} js = d.createElement(s); js.id = id; js.src = '//connect.facebook.net/en_US/sdk.js'; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk') ); <\/script> <body>"+t+"</body> </html>";q.body.appendChild(a),D(a).appendTo("#stamped-facebook-optin .fb-send-to-messenger"),a.contentWindow.document.open(),a.contentWindow.document.write(s),a.contentWindow.document.close()}}),clearInterval(a)),5<=++t&&clearInterval(a)},2e3)},closeSurveyOptin:function(){D("#stamped-facebook-optin").remove()},triggerEvent:Z,loadLauncherView:L,rewardsApplyCode:function(){var e=A.globalDataStampedRewards.links,t=D(".stamped-reward-coupon-code",w).text(),a=e.shop+"/discount/"+t,s=D("#stamped-rewards-apply-code",w);N(s,"loading"),D.ajax({type:"GET",url:a,success:function(e,t,a){N(s,"active")}})},toggleRewardsModal:R,jQuery:D,stampedLog:fe,initRewards:F}}(window,document);